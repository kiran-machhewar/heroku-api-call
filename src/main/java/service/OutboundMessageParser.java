package service;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import beans.APICall;
import beans.OutboundMessage;


public class OutboundMessageParser {
	
	public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException {
		OutboundMessage outboundMessage = parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"> <soapenv:Body>  <notifications xmlns=\"http://soap.sforce.com/2005/09/outbound\">   <OrganizationId>00D28000001i5TNEAY</OrganizationId>   <ActionId>04k28000000XZXsAAO</ActionId>   <SessionId>00D28000001i5TN!ARoAQBhALLGWakQKq_3ANoAR5yooIAFGO1vFWMg_W388lbsHLZw3kad4OxUD55S0Tr8dGcWO8D86kbsQso6bINhZX3Pdy1B1</SessionId>   <EnterpriseUrl>https://ap2.salesforce.com/services/Soap/c/39.0/00D28000001i5TN</EnterpriseUrl>   <PartnerUrl>https://ap2.salesforce.com/services/Soap/u/39.0/00D28000001i5TN</PartnerUrl>   <Notification>    <Id>04l28000007DIvxAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m2EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwPAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mUEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvEAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lJEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvnAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lsEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwMAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mREAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvwAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m1EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw9AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mEEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv5AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lAEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwIAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mNEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvVAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8laEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvGAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lLEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw7AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mCEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DJ14AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8r9EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvHAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lMEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwEAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mJEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvXAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lcEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvSAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lXEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvpAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8luEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvCAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lHEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwVAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8maEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwaAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mfEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv2AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8l7EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw4AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m9EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwLAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mQEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwWAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mbEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv8AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lDEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvaAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lfEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwOAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mTEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv9AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lEEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DJ04AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8q9EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvcAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lhEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvoAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8ltEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvfAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lkEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv4AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8l9EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvgAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8llEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvlAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lqEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvPAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lUEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv3AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8l8EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw3AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m8EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw1AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m6EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvkAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lpEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwBAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mGEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DJ02AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8q7EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvYAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8ldEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvKAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lPEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw2AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m7EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvQAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lVEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvhAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lmEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw5AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mAEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvFAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lKEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwSAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mXEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvmAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lrEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvbAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lgEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwCAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mHEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv7AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lCEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvzAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m4EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwFAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mKEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwKAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mPEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwAAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mFEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwGAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mLEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvBAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lGEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvWAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lbEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIveAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8ljEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvOAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lTEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvUAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lZEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwJAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mOEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwDAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mIEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwUAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mZEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvZAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8leEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwNAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mSEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvDAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lIEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvIAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lNEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvtAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lyEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvuAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lzEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw0AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m5EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvJAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lOEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwHAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mMEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIviAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lnEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvLAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lQEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwXAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mcEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvjAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8loEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvdAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8liEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwZAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8meEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvMAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lREAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvNAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lSEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DJ03AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8q8EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwTAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mYEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvRAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lWEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIv6AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lBEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvvAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m0EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvqAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lvEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvTAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lYEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvAAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lFEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvrAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8lwEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw8AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mDEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwYAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mdEAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIvyAAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8m3EAA</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIw6AAG</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mBEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwRAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mWEAQ</sf:Id>    </sObject>   </Notification>   <Notification>    <Id>04l28000007DIwQAAW</Id>    <sObject xsi:type=\"sf:API_Call__c\" xmlns:sf=\"urn:sobject.enterprise.soap.sforce.com\">     <sf:Id>a0O28000006q8mVEAQ</sf:Id>    </sObject>   </Notification>  </notifications> </soapenv:Body></soapenv:Envelope>");
		System.out.println(outboundMessage.getApiCalls());
		for(APICall apiCall :  outboundMessage.getApiCalls()){
			System.out.println(apiCall);
		}
	}
	
	public static OutboundMessage parseXML(String xml) throws ParserConfigurationException, SAXException, IOException{
		OutboundMessage outboundMessage = new OutboundMessage();   	
    	DocumentBuilderFactory factory =
		DocumentBuilderFactory.newInstance();
		DocumentBuilder builder = factory.newDocumentBuilder();
		StringBuilder xmlStringBuilder = new StringBuilder();
		xmlStringBuilder.append(xml);
		ByteArrayInputStream input =  new ByteArrayInputStream(
		   xmlStringBuilder.toString().getBytes("UTF-8"));
		Document doc = builder.parse(input);
		outboundMessage.setSessionId(doc.getElementsByTagName("SessionId").item(0).getTextContent());
		String partnerEndpoint = doc.getElementsByTagName("PartnerUrl").item(0).getTextContent();
		outboundMessage.setSalesforceInstance(partnerEndpoint.split("//")[1].split("\\.")[0]);
		outboundMessage.setApiVersion(partnerEndpoint.split("/u/")[1].split("/00D")[0]);
		
		NodeList notifications = doc.getElementsByTagName("Notification");
		
		for(int i=0;i < notifications.getLength();i++){
			System.out.println();
			APICall apiCall = new APICall();
			Node item = notifications.item(i);
		    Document ownerDocument = item.getOwnerDocument();			
			apiCall.setApiCallRecordId(ownerDocument.getElementsByTagName("sf:Id").item(i).getTextContent());
			apiCall.setEndpoint(ownerDocument.getElementsByTagName("sf:Endpoint__c").item(i).getTextContent());
			apiCall.setRequest(ownerDocument.getElementsByTagName("sf:Request__c").item(i).getTextContent());
			outboundMessage.apiCalls.add(apiCall);			
		}
		
		return outboundMessage;
	}

}
